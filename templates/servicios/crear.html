{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/servicios/servicio-form.css' %}">
{% endblock %}

{% block content %}

<div class="min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-sky-50 py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <div class="mb-8">
            <nav class="mb-4">
                <ol class="flex items-center space-x-2 text-sm">
                    <li><a href="{% url 'home' %}" class="text-gray-600 hover:text-sky-600 transition-colors">Inicio</a></li>
                    <li><i class="fas fa-chevron-right text-gray-400 text-xs"></i></li>
                    <li><a href="{% url 'servicios:listar_servicios' %}" class="text-gray-600 hover:text-sky-600 transition-colors">Servicios</a></li>
                    <li><i class="fas fa-chevron-right text-gray-400 text-xs"></i></li>
                    <li class="text-sky-600 font-medium">Crear Servicio</li>
                </ol>
            </nav>
            
            <div class="flex items-center space-x-4">
                <div class="w-16 h-16 bg-gradient-to-br from-sky-400 to-blue-500 rounded-2xl flex items-center justify-center shadow-xl">
                    <i class="fas fa-plus-circle text-white text-3xl"></i>
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-900">Crear Nuevo Servicio</h1>
                    <p class="text-gray-600 mt-1">Agrega un servicio turístico completo a tu catálogo</p>
                </div>
            </div>
        </div>

        <form method="post" enctype="multipart/form-data" class="space-y-6" id="servicioForm">
            {% csrf_token %}
            
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-info-circle text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Información Básica</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Nombre del Servicio <span class="text-red-500">*</span>
                        </label>
                        <input type="text" name="nombre" required
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                               placeholder="Ej: Tour a las Islas Galápagos">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Tipo de Servicio <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <select name="tipo" required
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-white cursor-pointer">
                                <option value="">Selecciona un tipo</option>
                                {% for tipo_code, tipo_nombre in tipos_servicio %}
                                <option value="{{ tipo_code }}">{{ tipo_nombre }}</option>
                                {% endfor %}
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Precio (USD) <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-bold">$</span>
                            <input type="number" name="precio" required min="0" step="0.01"
                                   class="w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="0.00">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Capacidad Máxima <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-users absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="number" name="capacidad_maxima" required min="1" value="1"
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="1">
                        </div>
                    </div>

                    <div class="flex items-center space-x-3">
                        <input type="checkbox" name="disponible" id="disponible" checked
                               class="w-6 h-6 text-sky-600 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 cursor-pointer">
                        <label for="disponible" class="text-sm font-semibold text-gray-700 cursor-pointer">Servicio disponible</label>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Destino <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-location-dot absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                            <select name="destino" required
                                    class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-white cursor-pointer">
                                <option value="">Selecciona un destino</option>
                                {% for destino in destinos %}
                                <option value="{{ destino.id }}">{{ destino.nombre }} - {{ destino.get_region_display }}</option>
                                {% endfor %}
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Categoría (opcional)</label>
                        <div class="relative">
                            <i class="fas fa-tag absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                            <select name="categoria"
                                    class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-white cursor-pointer">
                                <option value="">Sin categoría</option>
                                {% for categoria in categorias %}
                                <option value="{{ categoria.id }}">{{ categoria.nombre }}</option>
                                {% endfor %}
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Descripción <span class="text-red-500">*</span>
                        </label>
                        <textarea name="descripcion" required rows="5" maxlength="1000" id="descripcion"
                                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all resize-none"
                                  placeholder="Describe detalladamente tu servicio, incluye qué está incluido, itinerario, experiencia, etc."></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <p class="text-xs text-gray-500">
                                <i class="fas fa-lightbulb mr-1"></i>
                                Una buena descripción aumenta las reservas
                            </p>
                            <span class="text-xs text-gray-500">
                                <span id="charCount">0</span> / 1000
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-map-marker-alt text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Ubicación Geográfica</h2>
                </div>

                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 mb-6">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-info-circle text-green-600 mt-1"></i>
                        <p class="text-sm text-gray-700">
                            <span class="font-semibold">Haz clic en el mapa</span> para marcar la ubicación exacta de tu servicio, o ingresa las coordenadas manualmente.
                        </p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Dirección -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Dirección Completa <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-location-dot absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" name="direccion" required
                                class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                placeholder="Ej: Av. Charles Darwin, Puerto Ayora 200102, Ecuador">
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            <i class="fas fa-map mr-1"></i>
                            Incluye calle, número, ciudad y código postal
                        </p>
                    </div>

                    <!-- ✅ INPUTS DE COORDENADAS - DEBEN IR ANTES DEL MAPA -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Latitud <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-globe absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="number" 
                                name="latitud" 
                                id="latitud" 
                                required 
                                step="0.00000001" 
                                min="-5" 
                                max="2"
                                value="-0.1807"
                                class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all font-mono"
                                placeholder="-0.742833">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Rango: -5° a 2°</p>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Longitud <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-compass absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="number" 
                                name="longitud" 
                                id="longitud" 
                                required 
                                step="0.00000001" 
                                min="-92" 
                                max="-75"
                                value="-78.4678"
                                class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all font-mono"
                                placeholder="-90.308956">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Rango: -92° a -75°</p>
                    </div>

                    {% include 'servicios/partials/_mapa_leaflet_editable.html' %}

                    <!-- Zona de Referencia -->
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Zona de Referencia (opcional)</label>
                        <div class="relative">
                            <i class="fas fa-map-signs absolute left-4 top-4 text-gray-400"></i>
                            <input type="text" name="zona_referencia"
                                class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                placeholder="Ej: Frente al muelle principal, Cerca del parque central">
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Referencias que ayuden a los visitantes a encontrar tu servicio
                        </p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-address-book text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Información de Contacto</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Teléfono Principal <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-phone absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="tel" name="telefono" required pattern="^\+?[0-9]{9,15}$"
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="+593981234567">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Formato: +593981234567</p>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Teléfono Alternativo (opcional)</label>
                        <div class="relative">
                            <i class="fas fa-phone-alt absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="tel" name="telefono_alternativo" pattern="^\+?[0-9]{9,15}$"
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="+593987654321">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Email de Contacto <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="email" name="email_contacto" required
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="contacto@ejemplo.com">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">WhatsApp (opcional)</label>
                        <div class="relative">
                            <i class="fab fa-whatsapp absolute left-4 top-1/2 transform -translate-y-1/2 text-green-500"></i>
                            <input type="tel" name="whatsapp" pattern="^\+?[0-9]{9,15}$"
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="+593981234567">
                        </div>
                        <p class="text-xs text-gray-500 mt-1">
                            <i class="fas fa-info-circle mr-1"></i>
                            Para contacto rápido con clientes
                        </p>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Sitio Web (opcional)</label>
                        <div class="relative">
                            <i class="fas fa-globe absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="url" name="sitio_web"
                                   class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="https://www.ejemplo.com">
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-clock text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Horarios de Atención</h2>
                </div>

                <div class="bg-gradient-to-br from-blue-50 to-sky-50 rounded-xl p-6 mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-gray-900">
                            <i class="fas fa-calendar-week text-blue-600 mr-2"></i>
                            Lunes a Viernes
                        </h3>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" name="cerrado_semana" id="cerrado_semana"
                                   class="w-5 h-5 text-red-600 border-2 border-gray-300 rounded focus:ring-2 focus:ring-red-500 cursor-pointer">
                            <span class="ml-2 text-sm font-semibold text-gray-700">Cerrado</span>
                        </label>
                    </div>

                    <div id="horario_semana_fields" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Hora de Apertura</label>
                            <div class="relative">
                                <i class="fas fa-door-open absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="time" name="hora_apertura_semana" id="hora_apertura_semana" value="08:00"
                                       class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Hora de Cierre</label>
                            <div class="relative">
                                <i class="fas fa-door-closed absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="time" name="hora_cierre_semana" id="hora_cierre_semana" value="18:00"
                                       class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all">
                            </div>
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Notas (opcional)</label>
                            <input type="text" name="notas_semana"
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="Ej: Horario extendido en temporada alta">
                        </div>
                    </div>

                    <div id="cerrado_semana_msg" class="hidden text-center py-4">
                        <i class="fas fa-ban text-red-500 text-3xl mb-2"></i>
                        <p class="text-gray-700 font-semibold">Cerrado de Lunes a Viernes</p>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-gray-900">
                            <i class="fas fa-calendar-day text-purple-600 mr-2"></i>
                            Sábado y Domingo
                        </h3>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" name="cerrado_finde" id="cerrado_finde"
                                   class="w-5 h-5 text-red-600 border-2 border-gray-300 rounded focus:ring-2 focus:ring-red-500 cursor-pointer">
                            <span class="ml-2 text-sm font-semibold text-gray-700">Cerrado</span>
                        </label>
                    </div>

                    <div id="horario_finde_fields" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Hora de Apertura</label>
                            <div class="relative">
                                <i class="fas fa-door-open absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="time" name="hora_apertura_finde" id="hora_apertura_finde" value="09:00"
                                       class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Hora de Cierre</label>
                            <div class="relative">
                                <i class="fas fa-door-closed absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="time" name="hora_cierre_finde" id="hora_cierre_finde" value="17:00"
                                       class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all">
                            </div>
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Notas (opcional)</label>
                            <input type="text" name="notas_finde"
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all"
                                   placeholder="Ej: Solo sábados en temporada baja">
                        </div>
                    </div>

                    <div id="cerrado_finde_msg" class="hidden text-center py-4">
                        <i class="fas fa-ban text-red-500 text-3xl mb-2"></i>
                        <p class="text-gray-700 font-semibold">Cerrado Sábados y Domingos</p>
                    </div>
                </div>

                <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mt-6">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-lightbulb text-yellow-600 mt-1"></i>
                        <p class="text-sm text-gray-700">
                            <span class="font-semibold">Tip:</span> Los horarios visibles ayudan a los turistas a planificar mejor su visita.
                        </p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-images text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Imágenes del Servicio</h2>
                </div>

                <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-sky-500 transition-colors cursor-pointer bg-gray-50 hover:bg-sky-50" onclick="document.getElementById('imagenes').click()">
                    <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-700 mb-2">Arrastra imágenes o haz clic para seleccionar</h3>
                    <p class="text-sm text-gray-500 mb-4">PNG, JPG o WEBP (máx. 5MB por imagen)</p>
                    <input type="file" name="imagenes" id="imagenes" multiple accept="image/*" class="hidden">
                    <button type="button" onclick="document.getElementById('imagenes').click()"
                            class="px-6 py-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                        <i class="fas fa-folder-open mr-2"></i>
                        Seleccionar Imágenes
                    </button>
                </div>

                <div id="imagenesPreview" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 hidden"></div>
            </div>

            {% if proveedores %}
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-xl flex items-center justify-center mr-3 shadow-lg">
                        <i class="fas fa-user-tie text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900">Asignar Proveedor</h2>
                </div>

                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 mb-4">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-info-circle text-indigo-600 mt-1"></i>
                        <p class="text-sm text-gray-700">
                            <span class="font-semibold">Administradores:</span> Selecciona el proveedor propietario del servicio.
                        </p>
                    </div>
                </div>

                <div class="relative">
                    <i class="fas fa-user-circle absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    <select name="proveedor_id" required
                            class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-white cursor-pointer">
                        <option value="">Selecciona un proveedor</option>
                        {% for proveedor in proveedores %}
                        <option value="{{ proveedor.id }}">{{ proveedor.nombre }} - {{ proveedor.correo }}</option>
                        {% endfor %}
                    </select>
                    <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                </div>
            </div>
            {% else %}
            <div class="bg-gradient-to-br from-sky-50 to-blue-50 rounded-2xl shadow-xl p-6">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg flex-shrink-0">
                        <i class="fas fa-user-check text-white text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">Proveedor</h3>
                        <p class="text-gray-700">Este servicio será asignado a: <span class="font-semibold text-sky-600">{{ user.nombre }}</span></p>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <a href="{% url 'servicios:mis_servicios' %}"
                   class="w-full sm:w-auto px-8 py-4 border-2 border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-all inline-flex items-center justify-center">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Cancelar
                </a>
                
                <button type="submit" id="submitBtn"
                        class="w-full sm:w-auto px-8 py-4 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-2xl hover:scale-105 transition-all inline-flex items-center justify-center">
                    <i class="fas fa-save mr-2"></i>
                    Crear Servicio
                </button>
            </div>
        </form>

    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/servicios/servicio-form.js' %}"></script>
{% endblock %}
