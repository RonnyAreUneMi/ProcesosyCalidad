{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 via-sky-50 to-blue-50">
    
    <!-- Hero Header con Animación -->
    <div class="relative overflow-hidden gradient-bg py-16" data-aos="fade-down">
        <!-- Decorative Background Elements -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-white opacity-10 rounded-full blur-3xl"></div>
            <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-sky-300 opacity-10 rounded-full blur-3xl"></div>
        </div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div>
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="w-12 h-12 bg-white bg-opacity-20 backdrop-blur-custom rounded-xl flex items-center justify-center">
                            <i class="fas fa-concierge-bell text-white text-xl"></i>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-bold text-white">
                            Servicios Turísticos
                        </h1>
                    </div>
                    <p class="text-sky-100 text-lg">Descubre alojamiento, tours, actividades y más en todo Ecuador</p>
                </div>
                
                {% if user.is_authenticated and user.rol.nombre in 'proveedor,administrador' %}
                <a href="{% url 'servicios:crear_servicio' %}" 
                   class="inline-flex items-center px-6 py-3 bg-white text-sky-600 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
                    <i class="fas fa-plus-circle mr-2"></i>
                    Crear Servicio
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10 pb-12">
        
        <!-- Statistics Dashboard con Glassmorphism -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-8" data-aos="fade-up">
            <!-- Total Servicios -->
            <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 card-hover border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Total</p>
                        <p class="text-3xl font-bold bg-gradient-to-r from-sky-600 to-blue-600 bg-clip-text text-transparent">{{ total_resultados }}</p>
                    </div>
                    <div class="w-12 h-12 bg-gradient-to-br from-sky-400 to-blue-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-concierge-bell text-white text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Alojamiento -->
            <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 card-hover border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Alojamiento</p>
                        <p class="text-3xl font-bold text-purple-600">{{ page_obj.paginator.count }}</p>
                    </div>
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-hotel text-white text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Tours -->
            <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 card-hover border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Tours</p>
                        <p class="text-3xl font-bold text-green-600">{{ page_obj.paginator.count }}</p>
                    </div>
                    <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-route text-white text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Actividades -->
            <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 card-hover border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Actividades</p>
                        <p class="text-3xl font-bold text-orange-600">{{ page_obj.paginator.count }}</p>
                    </div>
                    <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-hiking text-white text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- Transporte -->
            <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 card-hover border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Transporte</p>
                        <p class="text-3xl font-bold text-blue-600">{{ page_obj.paginator.count }}</p>
                    </div>
                    <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-bus text-white text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros Avanzados con Diseño Moderno -->
        <div class="bg-white bg-opacity-90 backdrop-blur-xl rounded-2xl shadow-2xl p-6 mb-8 border border-white border-opacity-50" data-aos="fade-up">
            <div class="flex items-center mb-6">
                <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center mr-3 shadow-lg">
                    <i class="fas fa-sliders-h text-white"></i>
                </div>
                <h3 class="text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">Filtros de Búsqueda</h3>
            </div>
            
            <form method="get" class="space-y-6">
                <!-- Primera fila: Búsqueda y Tipo -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Búsqueda Global -->
                    <div class="relative group">
                        <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-sky-500 transition-colors"></i>
                        <input type="text" 
                               name="q" 
                               value="{{ filtros_aplicados.busqueda }}" 
                               placeholder="Buscar servicios, destinos..." 
                               class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all bg-gray-50 hover:bg-white">
                    </div>
                    
                    <!-- Tipo de Servicio -->
                    <div class="relative group">
                        <i class="fas fa-list absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-sky-500 transition-colors"></i>
                        <select name="tipo" 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-gray-50 hover:bg-white cursor-pointer">
                            <option value="">Todos los servicios</option>
                            {% for tipo_code, tipo_nombre in tipos_servicio %}
                            <option value="{{ tipo_code }}" {% if filtros_aplicados.tipo == tipo_code %}selected{% endif %}>
                                {{ tipo_nombre }}
                            </option>
                            {% endfor %}
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>
                </div>

                <!-- Segunda fila: Ubicación -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Región -->
                    <div class="relative group">
                        <i class="fas fa-map-marked-alt absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-sky-500 transition-colors"></i>
                        <select name="region" 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-gray-50 hover:bg-white cursor-pointer">
                            <option value="">Todas las regiones</option>
                            {% for value, label in regiones %}
                            <option value="{{ value }}" {% if filtros_aplicados.region == value %}selected{% endif %}>
                                {{ label }}
                            </option>
                            {% endfor %}
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>

                    <!-- Destino -->
                    <div class="relative group">
                        <i class="fas fa-location-dot absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-sky-500 transition-colors"></i>
                        <select name="destino" 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-gray-50 hover:bg-white cursor-pointer">
                            <option value="">Todos los destinos</option>
                            {% for destino in destinos %}
                            <option value="{{ destino.id }}" {% if filtros_aplicados.destino == destino.id|stringformat:"s" %}selected{% endif %}>
                                {{ destino.nombre }}
                            </option>
                            {% endfor %}
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>

                    <!-- Categoría -->
                    <div class="relative group">
                        <i class="fas fa-tag absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-sky-500 transition-colors"></i>
                        <select name="categoria" 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-gray-50 hover:bg-white cursor-pointer">
                            <option value="">Todas las categorías</option>
                            {% for categoria in categorias %}
                            <option value="{{ categoria.id }}" {% if filtros_aplicados.categoria == categoria.id|stringformat:"s" %}selected{% endif %}>
                                {{ categoria.nombre }}
                            </option>
                            {% endfor %}
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>
                </div>

                <!-- Tercera fila: Precio y Calificación -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Precio Mínimo -->
                    <div class="relative group">
                        <i class="fas fa-dollar-sign absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-sky-500 transition-colors"></i>
                        <input type="number" 
                               name="precio_min" 
                               value="{{ filtros_aplicados.precio_min }}" 
                               placeholder="Precio mínimo" 
                               min="0"
                               step="10"
                               class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all bg-gray-50 hover:bg-white">
                    </div>

                    <!-- Precio Máximo -->
                    <div class="relative group">
                        <i class="fas fa-dollar-sign absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-sky-500 transition-colors"></i>
                        <input type="number" 
                               name="precio_max" 
                               value="{{ filtros_aplicados.precio_max }}" 
                               placeholder="Precio máximo" 
                               min="0"
                               step="10"
                               class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all bg-gray-50 hover:bg-white">
                    </div>

                    <!-- Calificación -->
                    <div class="relative group">
                        <i class="fas fa-star absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-yellow-500 transition-colors"></i>
                        <select name="calificacion" 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all appearance-none bg-gray-50 hover:bg-white cursor-pointer">
                            <option value="">Cualquier calificación</option>
                            <option value="4.5" {% if filtros_aplicados.calificacion == "4.5" %}selected{% endif %}>★ 4.5+</option>
                            <option value="4" {% if filtros_aplicados.calificacion == "4" %}selected{% endif %}>★ 4+</option>
                            <option value="3" {% if filtros_aplicados.calificacion == "3" %}selected{% endif %}>★ 3+</option>
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>

                    <!-- Botón Buscar -->
                    <button type="submit" 
                            class="py-4 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-semibold flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
                        <i class="fas fa-search"></i>
                        <span>Buscar</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Sort y Resultados -->
        <div class="flex items-center justify-between mb-6 flex-wrap gap-4" data-aos="fade-up">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-lg flex items-center justify-center shadow-md">
                    <i class="fas fa-filter text-white"></i>
                </div>
                <p class="text-sm text-gray-600">
                    Mostrando <span class="font-bold text-sky-600">{{ page_obj.start_index }}</span> - 
                    <span class="font-bold text-sky-600">{{ page_obj.end_index }}</span> de 
                    <span class="font-bold text-sky-600">{{ page_obj.paginator.count }}</span> servicios
                </p>
            </div>
            
            <div class="flex items-center space-x-3">
                <label class="text-sm font-medium text-gray-700">Ordenar:</label>
                <div class="relative">
                    <select onchange="aplicarOrden(this.value)" 
                            class="pl-4 pr-10 py-2 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-sm font-medium bg-white hover:border-sky-300 transition-all appearance-none cursor-pointer">
                        <option value="calificacion" {% if filtros_aplicados.orden == "calificacion" %}selected{% endif %}>⭐ Mejor calificados</option>
                        <option value="precio_asc" {% if filtros_aplicados.orden == "precio_asc" %}selected{% endif %}>💰 Menor precio</option>
                        <option value="precio_desc" {% if filtros_aplicados.orden == "precio_desc" %}selected{% endif %}>💎 Mayor precio</option>
                        <option value="nombre" {% if filtros_aplicados.orden == "nombre" %}selected{% endif %}>🔤 Nombre A-Z</option>
                        <option value="recientes" {% if filtros_aplicados.orden == "recientes" %}selected{% endif %}>🆕 Más recientes</option>
                    </select>
                    <i class="fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                </div>
            </div>
        </div>

        <!-- Grid de Servicios con Diseño Premium -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            {% for servicio in page_obj %}
            <div class="group bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-500 card-hover border border-gray-100" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:0|divisibleby:3|yesno:'0,100,200' }}">
                <!-- Imagen con Overlay -->
                <div class="relative h-64 overflow-hidden">
                    {% if servicio.imagenes.first %}
                    <img src="{{ servicio.imagenes.first.imagen.url }}" 
                         alt="{{ servicio.nombre }}" 
                         class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                    {% else %}
                    <div class="w-full h-full bg-gradient-to-br from-sky-400 to-blue-500 flex items-center justify-center">
                        <i class="fas fa-image text-white text-6xl opacity-30"></i>
                    </div>
                    {% endif %}
                    
                    <!-- Gradient Overlay -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"></div>
                    
                    <!-- Badges -->
                    <div class="absolute top-4 left-4 flex flex-col space-y-2">
                        <!-- Tipo de Servicio -->
                        <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-white text-gray-800 shadow-lg backdrop-blur-sm">
                            {% if servicio.tipo == 'alojamiento' %}
                                <i class="fas fa-hotel mr-1.5 text-purple-600"></i>
                            {% elif servicio.tipo == 'tour' %}
                                <i class="fas fa-route mr-1.5 text-green-600"></i>
                            {% elif servicio.tipo == 'actividad' %}
                                <i class="fas fa-hiking mr-1.5 text-orange-600"></i>
                            {% elif servicio.tipo == 'transporte' %}
                                <i class="fas fa-bus mr-1.5 text-blue-600"></i>
                            {% else %}
                                <i class="fas fa-utensils mr-1.5 text-red-600"></i>
                            {% endif %}
                            {{ servicio.get_tipo_display }}
                        </span>
                        
                        <!-- Disponibilidad -->
                        {% if servicio.disponible %}
                        <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-green-500 text-white shadow-lg">
                            <i class="fas fa-check-circle mr-1.5"></i>
                            Disponible
                        </span>
                        {% endif %}
                    </div>

                    <!-- Rating Badge -->
                    <div class="absolute top-4 right-4">
                        <div class="flex items-center space-x-1 bg-yellow-400 px-3 py-1.5 rounded-full shadow-lg">
                            <i class="fas fa-star text-yellow-900 text-sm"></i>
                            <span class="font-bold text-yellow-900 text-sm">{{ servicio.calificacion_promedio|floatformat:1 }}</span>
                        </div>
                    </div>

                    <!-- Precio Badge -->
                    <div class="absolute bottom-4 right-4">
                        <div class="bg-white bg-opacity-95 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg">
                            <p class="text-xs text-gray-600 font-medium">Desde</p>
                            <p class="text-2xl font-bold text-sky-600">${{ servicio.precio|floatformat:0 }}</p>
                        </div>
                    </div>
                </div>

                <!-- Contenido -->
                <div class="p-6">
                    <!-- Título y Acciones -->
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="text-xl font-bold text-gray-900 group-hover:text-sky-600 transition-colors line-clamp-2 flex-1">
                            <a href="{% url 'servicios:detalle_servicio' servicio.id %}">
                                {{ servicio.nombre }}
                            </a>
                        </h3>
                        
                        {% if user.is_authenticated and user.rol.nombre in 'proveedor,administrador' %}
                        {% if servicio.proveedor == user or user.rol.nombre == 'administrador' %}
                        <div class="flex items-center space-x-1 ml-2">
                            <a href="{% url 'servicios:editar_servicio' servicio.id %}" 
                               class="p-2 text-sky-600 hover:bg-sky-50 rounded-lg transition-colors"
                               title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>

                    <!-- Ubicación -->
                    <div class="flex items-center text-sm text-gray-600 mb-4">
                        <i class="fas fa-location-dot mr-2 text-sky-500"></i>
                        <span class="font-medium">{{ servicio.destino.nombre }}</span>
                        <span class="mx-2">•</span>
                        <span class="text-gray-500">{{ servicio.destino.get_region_display }}</span>
                    </div>

                    <!-- Descripción -->
                    <p class="text-gray-700 text-sm mb-4 line-clamp-2">
                        {{ servicio.descripcion|truncatewords:15 }}
                    </p>

                    <!-- Footer Info -->
                    <div class="flex items-center justify-between pt-4 border-t border-gray-100">
                        <div class="flex items-center space-x-4 text-sm text-gray-600">
                            <!-- Capacidad -->
                            <div class="flex items-center">
                                <i class="fas fa-users mr-1.5 text-sky-500"></i>
                                <span class="font-medium">{{ servicio.capacidad_maxima }}</span>
                            </div>
                            
                            <!-- Calificaciones -->
                            <div class="flex items-center">
                                <i class="fas fa-comment mr-1.5 text-yellow-500"></i>
                                <span class="font-medium">{{ servicio.total_calificaciones }}</span>
                            </div>
                        </div>
                        
                        <!-- Botón Ver Más -->
                        <a href="{% url 'servicios:detalle_servicio' servicio.id %}" 
                           class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-lg font-semibold text-sm hover:shadow-lg hover:scale-105 transition-all duration-300">
                            Ver más
                            <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% empty %}
            <!-- Empty State -->
            <div class="col-span-full">
                <div class="bg-white rounded-2xl shadow-xl p-16 text-center" data-aos="zoom-in">
                    <div class="w-24 h-24 bg-gradient-to-br from-sky-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-search text-sky-500 text-4xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">No se encontraron servicios</h3>
                    <p class="text-gray-600 mb-6 max-w-md mx-auto">
                        No hay servicios que coincidan con tus criterios de búsqueda. 
                        Intenta ajustar los filtros.
                    </p>
                    <a href="{% url 'servicios:listar_servicios' %}" 
                       class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
                        <i class="fas fa-redo mr-2"></i>
                        Limpiar filtros
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination Premium -->
        {% if page_obj.has_other_pages %}
        <div class="flex items-center justify-center" data-aos="fade-up">
            <nav class="inline-flex items-center space-x-2" aria-label="Paginación">
                {% if page_obj.has_previous %}
                <a href="?page=1{{ filtros_query }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-angle-double-left"></i>
                </a>
                <a href="?page={{ page_obj.previous_page_number }}{{ filtros_query }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-angle-left"></i>
                </a>
                {% else %}
                <span class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed">
                    <i class="fas fa-angle-double-left"></i>
                </span>
                <span class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed">
                    <i class="fas fa-angle-left"></i>
                </span>
                {% endif %}

                <!-- Números de Página -->
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                    <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-gradient-to-r from-sky-500 to-blue-600 text-white font-bold shadow-lg">
                        {{ num }}
                    </span>
                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <a href="?page={{ num }}{{ filtros_query }}" 
                       class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:border-sky-500 hover:text-sky-600 font-semibold transition-all">
                        {{ num }}
                    </a>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{{ filtros_query }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-angle-right"></i>
                </a>
                <a href="?page={{ page_obj.paginator.num_pages }}{{ filtros_query }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white text-gray-700 hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-angle-double-right"></i>
                </a>
                {% else %}
                <span class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed">
                    <i class="fas fa-angle-right"></i>
                </span>
                <span class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed">
                    <i class="fas fa-angle-double-right"></i>
                </span>
                {% endif %}
            </nav>
        </div>
        {% endif %}

    </div>
</div>

<!-- JavaScript para funcionalidad -->
<script>
function aplicarOrden(orden) {
    const url = new URL(window.location.href);
    url.searchParams.set('orden', orden);
    window.location.href = url.toString();
}

// Animación suave al cargar
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar AOS si está disponible
    if (typeof AOS !== 'undefined') {
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
    }
});

// Efecto de hover en las cards
document.querySelectorAll('.card-hover').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-8px)';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
    });
});
</script>

<style>
/* Estilos adicionales para mejorar la experiencia */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.backdrop-blur-custom {
    backdrop-filter: blur(10px);
}

.card-hover {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* Animación para los badges */
@keyframes pulse-soft {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
}

.group:hover .absolute.top-4.right-4 > div {
    animation: pulse-soft 2s ease-in-out infinite;
}

/* Gradiente animado para el header */
.gradient-bg {
    background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #6366f1 100%);
    background-size: 200% 200%;
    animation: gradient-shift 10s ease infinite;
}

@keyframes gradient-shift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Efecto glassmorphism mejorado */
.backdrop-blur-lg {
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
}

/* Scrollbar personalizado */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #0ea5e9, #3b82f6);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #0284c7, #2563eb);
}

/* Animación para los iconos */
.fa-icon-float {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-10px);
    }
}

/* Efecto de brillo en botones */
.btn-primary {
    position: relative;
    overflow: hidden;
}

.btn-primary::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-primary:hover::before {
    width: 300px;
    height: 300px;
}
</style>
{% endblock %}