{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-sky-50">
    
    <!-- Header Hero -->
    <div class="gradient-bg py-12" data-aos="fade-down">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">
                        Mis Servicios
                    </h1>
                    <p class="text-sky-100 text-lg">Administra tus servicios turísticos</p>
                </div>
                <a href="{% url 'servicios:crear_servicio' %}" 
                   class="inline-flex items-center px-6 py-3 bg-white text-sky-600 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
                    <i class="fas fa-plus-circle mr-2"></i>
                    Nuevo Servicio
                </a>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-6 relative z-10 pb-12">
        
        <!-- Dashboard de Estadísticas -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" data-aos="fade-up">
            <!-- Total Servicios -->
            <div class="bg-white bg-opacity-90 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">Total de Servicios</p>
                        <p class="text-4xl font-bold bg-gradient-to-r from-sky-600 to-blue-600 bg-clip-text text-transparent">
                            {{ total_servicios }}
                        </p>
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-sky-400 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-concierge-bell text-white text-2xl"></i>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-gray-100">
                    <span class="text-xs text-gray-600 flex items-center">
                        <i class="fas fa-check-circle text-green-500 mr-2"></i>
                        {{ servicios_activos }} activos
                    </span>
                </div>
            </div>

            <!-- Calificación Promedio -->
            <div class="bg-white bg-opacity-90 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">Calificación Promedio</p>
                        <div class="flex items-center space-x-2">
                            <p class="text-4xl font-bold text-yellow-500">
                                {{ promedio_calificacion|floatformat:1 }}
                            </p>
                            <div class="flex">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= promedio_calificacion %}
                                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                                    {% else %}
                                    <i class="far fa-star text-yellow-400 text-sm"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-star text-white text-2xl"></i>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-gray-100">
                    <span class="text-xs text-gray-600">
                        <i class="fas fa-chart-line text-sky-500 mr-2"></i>
                        Basado en todas las reseñas
                    </span>
                </div>
            </div>

            <!-- Servicios Activos -->
            <div class="bg-white bg-opacity-90 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-white border-opacity-50">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600 mb-1">Disponibles</p>
                        <p class="text-4xl font-bold text-green-600">
                            {{ servicios_activos }}
                        </p>
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-check-double text-white text-2xl"></i>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-gray-100">
                    <span class="text-xs text-gray-600">
                        <i class="fas fa-clock text-orange-500 mr-2"></i>
                        {{ total_servicios|add:"-"|add:servicios_activos }} no disponibles
                    </span>
                </div>
            </div>
        </div>

        <!-- Filtros y Búsqueda Rápida -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-8" data-aos="fade-up">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div class="relative flex-1 max-w-md">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input type="text" 
                           id="busquedaRapida"
                           placeholder="Buscar en mis servicios..." 
                           class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all">
                </div>
                
                <div class="flex items-center space-x-3">
                    <select id="filtroEstado" 
                            class="px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none cursor-pointer">
                        <option value="todos">Todos</option>
                        <option value="disponibles">Disponibles</option>
                        <option value="no-disponibles">No disponibles</option>
                    </select>
                    
                    <button onclick="actualizarVista()" 
                            class="px-6 py-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                        <i class="fas fa-filter mr-2"></i>
                        Filtrar
                    </button>
                </div>
            </div>
        </div>

        <!-- Lista de Servicios -->
        <div class="space-y-6" id="listaServicios">
            {% for servicio in page_obj %}
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300 servicio-card" 
                 data-nombre="{{ servicio.nombre|lower }}"
                 data-estado="{% if servicio.disponible %}disponible{% else %}no-disponible{% endif %}"
                 data-aos="fade-up"
                 data-aos-delay="{{ forloop.counter0|add:0|divisibleby:3|yesno:'0,100,200' }}">
                
                <div class="grid grid-cols-1 md:grid-cols-5 gap-6 p-6">
                    <!-- Imagen -->
                    <div class="md:col-span-1">
                        <div class="relative aspect-square rounded-xl overflow-hidden group">
                            {% if servicio.imagenes.first %}
                            <img src="{{ servicio.imagenes.first.imagen.url }}" 
                                 alt="{{ servicio.nombre }}" 
                                 class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                            {% else %}
                            <div class="w-full h-full bg-gradient-to-br from-sky-400 to-blue-500 flex items-center justify-center">
                                <i class="fas fa-image text-white text-4xl opacity-30"></i>
                            </div>
                            {% endif %}
                            
                            <!-- Badge de Estado -->
                            <div class="absolute top-2 right-2">
                                {% if servicio.disponible %}
                                <span class="px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full shadow-lg">
                                    <i class="fas fa-check-circle mr-1"></i>Disponible
                                </span>
                                {% else %}
                                <span class="px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg">
                                    <i class="fas fa-times-circle mr-1"></i>No disponible
                                </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Información -->
                    <div class="md:col-span-3 space-y-4">
                        <!-- Título y Tipo -->
                        <div>
                            <div class="flex items-start justify-between mb-2">
                                <h3 class="text-2xl font-bold text-gray-900 hover:text-sky-600 transition-colors">
                                    <a href="{% url 'servicios:detalle_servicio' servicio.id %}">
                                        {{ servicio.nombre }}
                                    </a>
                                </h3>
                                
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-sky-100 text-sky-800">
                                    {{ servicio.get_tipo_display }}
                                </span>
                            </div>
                            
                            <div class="flex items-center space-x-4 text-sm text-gray-600">
                                <span class="flex items-center">
                                    <i class="fas fa-location-dot mr-2 text-sky-500"></i>
                                    {{ servicio.destino.nombre }}
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-map-marked-alt mr-2 text-green-500"></i>
                                    {{ servicio.destino.get_region_display }}
                                </span>
                            </div>
                        </div>

                        <!-- Descripción -->
                        <p class="text-gray-700 line-clamp-2">
                            {{ servicio.descripcion|truncatewords:25 }}
                        </p>

                        <!-- Estadísticas -->
                        <div class="flex items-center space-x-6">
                            <div class="flex items-center space-x-2">
                                <div class="flex items-center">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= servicio.calificacion_promedio %}
                                        <i class="fas fa-star text-yellow-400 text-sm"></i>
                                        {% else %}
                                        <i class="far fa-star text-yellow-400 text-sm"></i>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <span class="text-sm font-semibold text-gray-700">
                                    {{ servicio.calificacion_promedio|floatformat:1 }}
                                </span>
                                <span class="text-sm text-gray-500">
                                    ({{ servicio.total_calificaciones }})
                                </span>
                            </div>

                            <div class="flex items-center space-x-2 text-sm text-gray-600">
                                <i class="fas fa-users text-sky-500"></i>
                                <span>Capacidad: <span class="font-semibold">{{ servicio.capacidad_maxima }}</span></span>
                            </div>

                            <div class="flex items-center space-x-2 text-sm text-gray-600">
                                <i class="fas fa-calendar-alt text-purple-500"></i>
                                <span>{{ servicio.fecha_creacion|date:"d M Y" }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Precio y Acciones -->
                    <div class="md:col-span-1 flex flex-col justify-between items-end space-y-4">
                        <!-- Precio -->
                        <div class="text-right">
                            <p class="text-sm text-gray-600 mb-1">Precio</p>
                            <p class="text-3xl font-bold text-sky-600">
                                ${{ servicio.precio|floatformat:0 }}
                            </p>
                            <p class="text-xs text-gray-500">por persona</p>
                        </div>

                        <!-- Botones de Acción -->
                        <div class="flex flex-col space-y-2 w-full">
                            <a href="{% url 'servicios:detalle_servicio' servicio.id %}" 
                               class="w-full px-4 py-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-lg font-semibold text-center hover:shadow-lg hover:scale-105 transition-all">
                                <i class="fas fa-eye mr-2"></i>Ver
                            </a>
                            
                            <a href="{% url 'servicios:editar_servicio' servicio.id %}" 
                               class="w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-semibold text-center hover:shadow-lg hover:scale-105 transition-all">
                                <i class="fas fa-edit mr-2"></i>Editar
                            </a>
                            
                            <button onclick="confirmarEliminar({{ servicio.id }}, '{{ servicio.nombre }}')" 
                                    class="w-full px-4 py-2 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg font-semibold hover:shadow-lg hover:scale-105 transition-all">
                                <i class="fas fa-trash mr-2"></i>Eliminar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="bg-white rounded-2xl shadow-xl p-16 text-center" data-aos="zoom-in">
                <div class="w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-box-open text-gray-400 text-5xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-900 mb-3">No tienes servicios aún</h3>
                <p class="text-gray-600 mb-6 max-w-md mx-auto">
                    Comienza a agregar servicios turísticos para que los viajeros puedan descubrirlos y reservarlos.
                </p>
                <a href="{% url 'servicios:crear_servicio' %}" 
                   class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-2xl hover:scale-105 transition-all">
                    <i class="fas fa-plus-circle mr-2"></i>
                    Crear tu Primer Servicio
                </a>
            </div>
            {% endfor %}
        </div>

        <!-- Paginación -->
        {% if page_obj.has_other_pages %}
        <div class="flex items-center justify-center mt-12" data-aos="fade-up">
            <nav class="inline-flex items-center space-x-2">
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-chevron-left"></i>
                </a>
                {% endif %}

                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                    <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-gradient-to-r from-sky-500 to-blue-600 text-white font-bold shadow-lg">
                        {{ num }}
                    </span>
                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <a href="?page={{ num }}" 
                       class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white hover:border-sky-500 hover:text-sky-600 transition-all">
                        {{ num }}
                    </a>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" 
                   class="w-10 h-10 flex items-center justify-center rounded-lg border-2 border-gray-200 bg-white hover:border-sky-500 hover:text-sky-600 transition-all">
                    <i class="fas fa-chevron-right"></i>
                </a>
                {% endif %}
            </nav>
        </div>
        {% endif %}

    </div>
</div>

<!-- Modal de Confirmación -->
<div id="modalEliminar" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8" data-aos="zoom-in">
        <div class="text-center mb-6">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-exclamation-triangle text-red-600 text-3xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-2">¿Eliminar servicio?</h3>
            <p class="text-gray-600" id="mensajeEliminar"></p>
        </div>
        
        <form id="formEliminar" method="post" action="">
            {% csrf_token %}
            <div class="flex space-x-3">
                <button type="button" 
                        onclick="cerrarModal()"
                        class="flex-1 px-6 py-3 border-2 border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-colors">
                    Cancelar
                </button>
                <button type="submit" 
                        class="flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-xl font-semibold hover:shadow-lg hover:scale-105 transition-all">
                    Sí, eliminar
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Búsqueda en tiempo real
document.getElementById('busquedaRapida')?.addEventListener('input', function(e) {
    const busqueda = e.target.value.toLowerCase();
    filtrarServicios(busqueda, document.getElementById('filtroEstado').value);
});

// Filtro por estado
document.getElementById('filtroEstado')?.addEventListener('change', function(e) {
    const busqueda = document.getElementById('busquedaRapida').value.toLowerCase();
    filtrarServicios(busqueda, e.target.value);
});

function filtrarServicios(busqueda, estado) {
    const servicios = document.querySelectorAll('.servicio-card');
    let visibles = 0;
    
    servicios.forEach(servicio => {
        const nombre = servicio.getAttribute('data-nombre');
        const estadoServicio = servicio.getAttribute('data-estado');
        
        let mostrar = true;
        
        // Filtro por búsqueda
        if (busqueda && !nombre.includes(busqueda)) {
            mostrar = false;
        }
        
        // Filtro por estado
        if (estado === 'disponibles' && estadoServicio !== 'disponible') {
            mostrar = false;
        } else if (estado === 'no-disponibles' && estadoServicio === 'disponible') {
            mostrar = false;
        }
        
        if (mostrar) {
            servicio.style.display = 'block';
            servicio.classList.add('animate-fade-in-up');
            visibles++;
        } else {
            servicio.style.display = 'none';
        }
    });
    
    // Mostrar mensaje si no hay resultados
    mostrarMensajeVacio(visibles === 0);
}

function mostrarMensajeVacio(mostrar) {
    let mensaje = document.getElementById('mensajeVacio');
    
    if (mostrar) {
        if (!mensaje) {
            mensaje = document.createElement('div');
            mensaje.id = 'mensajeVacio';
            mensaje.className = 'bg-white rounded-2xl shadow-xl p-12 text-center animate-fade-in-up';
            mensaje.innerHTML = `
                <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-search text-gray-400 text-3xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-700 mb-2">No se encontraron servicios</h3>
                <p class="text-gray-500">Intenta ajustar los filtros de búsqueda</p>
            `;
            document.getElementById('listaServicios').appendChild(mensaje);
        }
    } else {
        if (mensaje) {
            mensaje.remove();
        }
    }
}

function actualizarVista() {
    const busqueda = document.getElementById('busquedaRapida').value.toLowerCase();
    const estado = document.getElementById('filtroEstado').value;
    filtrarServicios(busqueda, estado);
    
    mostrarNotificacion('Filtros aplicados correctamente', 'success');
}

// Modal de eliminación
function confirmarEliminar(id, nombre) {
    const modal = document.getElementById('modalEliminar');
    const form = document.getElementById('formEliminar');
    const mensaje = document.getElementById('mensajeEliminar');
    
    mensaje.textContent = `¿Estás seguro de eliminar "${nombre}"? Esta acción no se puede deshacer.`;
    form.action = `/servicios/${id}/eliminar/`;
    
    modal.classList.remove('hidden');
}

function cerrarModal() {
    document.getElementById('modalEliminar').classList.add('hidden');
}

// Cerrar modal al hacer clic fuera
document.getElementById('modalEliminar')?.addEventListener('click', function(e) {
    if (e.target === this) {
        cerrarModal();
    }
});

// Notificaciones
function mostrarNotificacion(mensaje, tipo) {
    const notificacion = document.createElement('div');
    notificacion.className = `fixed top-4 right-4 px-6 py-4 rounded-xl shadow-2xl z-50 transform transition-all duration-300 ${
        tipo === 'success' ? 'bg-green-500' : 'bg-red-500'
    } text-white font-semibold animate-slide-in`;
    notificacion.innerHTML = `
        <div class="flex items-center space-x-3">
            <i class="fas fa-${tipo === 'success' ? 'check-circle' : 'exclamation-circle'} text-xl"></i>
            <span>${mensaje}</span>
        </div>
    `;
    document.body.appendChild(notificacion);
    
    setTimeout(() => {
        notificacion.style.transform = 'translateX(400px)';
        setTimeout(() => notificacion.remove(), 300);
    }, 3000);
}

// Inicializar AOS
document.addEventListener('DOMContentLoaded', function() {
    if (typeof AOS !== 'undefined') {
        AOS.init({
            duration: 600,
            easing: 'ease-in-out',
            once: true
        });
    }
});

// Atajos de teclado
document.addEventListener('keydown', function(e) {
    // Ctrl/Cmd + K para enfocar búsqueda
    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.getElementById('busquedaRapida')?.focus();
    }
    
    // Escape para cerrar modal
    if (e.key === 'Escape') {
        cerrarModal();
    }
});

// Auto-refresh cada 5 minutos (opcional)
let autoRefreshInterval;
function iniciarAutoRefresh() {
    autoRefreshInterval = setInterval(() => {
        const indicador = document.createElement('div');
        indicador.className = 'fixed bottom-4 right-4 px-4 py-2 bg-sky-500 text-white text-sm rounded-lg shadow-lg';
        indicador.innerHTML = '<i class="fas fa-sync-alt fa-spin mr-2"></i>Actualizando...';
        document.body.appendChild(indicador);
        
        setTimeout(() => {
            indicador.remove();
            location.reload();
        }, 1000);
    }, 300000); // 5 minutos
}

// Exportar servicios a CSV (función extra)
function exportarServicios() {
    const servicios = [];
    document.querySelectorAll('.servicio-card').forEach(card => {
        if (card.style.display !== 'none') {
            const nombre = card.querySelector('h3').textContent.trim();
            const precio = card.querySelector('.text-3xl').textContent.trim();
            const calificacion = card.querySelector('.font-semibold').textContent.trim();
            
            servicios.push({
                nombre,
                precio,
                calificacion
            });
        }
    });
    
    let csv = 'Nombre,Precio,Calificación\n';
    servicios.forEach(s => {
        csv += `"${s.nombre}","${s.precio}","${s.calificacion}"\n`;
    });
    
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'mis_servicios_' + new Date().toISOString().split('T')[0] + '.csv';
    a.click();
    
    mostrarNotificacion('Servicios exportados exitosamente', 'success');
}

// Animación de entrada suave
window.addEventListener('load', () => {
    document.querySelectorAll('.servicio-card').forEach((card, index) => {
        setTimeout(() => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'all 0.6s ease';
            
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 50);
        }, index * 100);
    });
});
</script>

<style>
/* Animaciones */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        transform: translateX(400px);
    }
    to {
        transform: translateX(0);
    }
}

.animate-fade-in-up {
    animation: fadeInUp 0.6s ease-out;
}

.animate-slide-in {
    animation: slideIn 0.3s ease-out;
}

/* Line clamp */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Glassmorphism */
.backdrop-blur-lg {
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
}

/* Gradiente animado */
.gradient-bg {
    background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #6366f1 100%);
    background-size: 200% 200%;
    animation: gradient-shift 10s ease infinite;
}

@keyframes gradient-shift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Efecto hover en cards */
.servicio-card {
    transition: all 0.3s ease;
}

.servicio-card:hover {
    transform: translateY(-4px);
}

/* Scrollbar personalizado */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #0ea5e9, #3b82f6);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #0284c7, #2563eb);
}

/* Focus visible mejorado */
*:focus-visible {
    outline: 2px solid #0ea5e9;
    outline-offset: 2px;
}

/* Smooth scroll */
html {
    scroll-behavior: smooth;
}

/* Loading state */
.loading {
    pointer-events: none;
    opacity: 0.6;
}

.loading::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Efecto de pulso suave */
@keyframes pulse-soft {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.pulse-soft {
    animation: pulse-soft 2s ease-in-out infinite;
}

/* Responsive improvements */
@media (max-width: 768px) {
    .servicio-card .grid {
        grid-template-columns: 1fr;
    }
    
    .servicio-card .md\:col-span-1,
    .servicio-card .md\:col-span-3 {
        grid-column: span 1;
    }
}

/* Print styles */
@media print {
    .gradient-bg,
    button,
    .border-dashed,
    nav {
        display: none !important;
    }
    
    .servicio-card {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}
</style>
{% endblock %}